{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.215.0"},"children":{"BackendStack":{"id":"BackendStack","path":"BackendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.215.0"},"children":{"my-music-app-files":{"id":"my-music-app-files","path":"BackendStack/my-music-app-files","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.215.0","metadata":[{"blockPublicAccess":"*","publicReadAccess":true,"removalPolicy":"destroy","versioned":true,"websiteErrorDocument":"*","websiteIndexDocument":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/my-music-app-files/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":false,"ignorePublicAcls":true,"restrictPublicBuckets":false},"versioningConfiguration":{"status":"Enabled"},"websiteConfiguration":{"indexDocument":"index.html","errorDocument":"error.html"}}}},"Policy":{"id":"Policy","path":"BackendStack/my-music-app-files/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.215.0","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/my-music-app-files/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"mymusicappfilesAC4E028D"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"MusicBucketURL":{"id":"MusicBucketURL","path":"BackendStack/MusicBucketURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"Artists":{"id":"Artists","path":"BackendStack/Artists","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/Artists/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"Genre","attributeType":"S"},{"attributeName":"Id","attributeType":"S"},{"attributeName":"deleted","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"deleted-index","keySchema":[{"attributeName":"deleted","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}},{"indexName":"Id-index","keySchema":[{"attributeName":"Id","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"Genre","keyType":"HASH"},{"attributeName":"Id","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/Artists/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"Songs":{"id":"Songs","path":"BackendStack/Songs","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/Songs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"Album","attributeType":"S"},{"attributeName":"Id","attributeType":"S"},{"attributeName":"deleted","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"deleted-index","keySchema":[{"attributeName":"deleted","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}},{"indexName":"Album-index","keySchema":[{"attributeName":"Album","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}},{"indexName":"Id-index","keySchema":[{"attributeName":"Id","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"Album","keyType":"HASH"},{"attributeName":"Id","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/Songs/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"Albums":{"id":"Albums","path":"BackendStack/Albums","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/Albums/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"Genre","attributeType":"S"},{"attributeName":"Id","attributeType":"S"},{"attributeName":"deleted","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"deleted-index","keySchema":[{"attributeName":"deleted","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}},{"indexName":"Id-index","keySchema":[{"attributeName":"Id","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"Genre","keyType":"HASH"},{"attributeName":"Id","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/Albums/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"ArtistSong":{"id":"ArtistSong","path":"BackendStack/ArtistSong","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistSong/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"ArtistId","attributeType":"S"},{"attributeName":"SongId","attributeType":"S"},{"attributeName":"AlbumId","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"AlbumId-index","keySchema":[{"attributeName":"AlbumId","keyType":"HASH"},{"attributeName":"ArtistId","keyType":"RANGE"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"ArtistId","keyType":"HASH"},{"attributeName":"SongId","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/ArtistSong/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"ArtistAlbum":{"id":"ArtistAlbum","path":"BackendStack/ArtistAlbum","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistAlbum/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"ArtistId","attributeType":"S"},{"attributeName":"AlbumId","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"AlbumId-index","keySchema":[{"attributeName":"AlbumId","keyType":"HASH"},{"attributeName":"ArtistId","keyType":"RANGE"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"ArtistId","keyType":"HASH"},{"attributeName":"AlbumId","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/ArtistAlbum/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"Ratings":{"id":"Ratings","path":"BackendStack/Ratings","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy","stream":"NEW_IMAGE"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/Ratings/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"User","attributeType":"S"},{"attributeName":"Song","attributeType":"S"},{"attributeName":"UserGenre","attributeType":"S"},{"attributeName":"UserArtist","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"UserGenreIndex","keySchema":[{"attributeName":"UserGenre","keyType":"HASH"},{"attributeName":"Song","keyType":"RANGE"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}},{"indexName":"UserArtistIndex","keySchema":[{"attributeName":"UserArtist","keyType":"HASH"},{"attributeName":"Song","keyType":"RANGE"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"User","keyType":"HASH"},{"attributeName":"Song","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5},"streamSpecification":{"streamViewType":"NEW_IMAGE"}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/Ratings/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"Subscriptions":{"id":"Subscriptions","path":"BackendStack/Subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy","stream":"NEW_IMAGE"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/Subscriptions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"Target","attributeType":"S"},{"attributeName":"User","attributeType":"S"},{"attributeName":"id","attributeType":"S"}],"globalSecondaryIndexes":[{"indexName":"id-index","keySchema":[{"attributeName":"id","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}},{"indexName":"User-index","keySchema":[{"attributeName":"User","keyType":"HASH"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"Target","keyType":"HASH"},{"attributeName":"User","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5},"streamSpecification":{"streamViewType":"NEW_IMAGE"}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/Subscriptions/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"ListeningHistory":{"id":"ListeningHistory","path":"BackendStack/ListeningHistory","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy","stream":"NEW_IMAGE"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistory/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"User","attributeType":"S"},{"attributeName":"TimeStamp","attributeType":"S"}],"keySchema":[{"attributeName":"User","keyType":"HASH"},{"attributeName":"TimeStamp","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5},"streamSpecification":{"streamViewType":"NEW_IMAGE"}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/ListeningHistory/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"Score":{"id":"Score","path":"BackendStack/Score","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.215.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","projectionType":"ALL","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/Score/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"User","attributeType":"S"},{"attributeName":"Content","attributeType":"S"},{"attributeName":"TotalScore","attributeType":"N"}],"globalSecondaryIndexes":[{"indexName":"UserTotalScoreIndex","keySchema":[{"attributeName":"User","keyType":"HASH"},{"attributeName":"TotalScore","keyType":"RANGE"}],"projection":{"projectionType":"ALL"},"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}],"keySchema":[{"attributeName":"User","keyType":"HASH"},{"attributeName":"Content","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5}}}},"ScalingRole":{"id":"ScalingRole","path":"BackendStack/Score/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}}}},"MusicAppUserPool":{"id":"MusicAppUserPool","path":"BackendStack/MusicAppUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.215.0","metadata":[{"accountRecovery":2,"customAttributes":"*","mfa":"OFF","passwordPolicy":{"minLength":"*","requireDigits":false,"requireLowercase":false,"requireSymbols":false,"requireUppercase":false},"removalPolicy":"destroy","selfSignUpEnabled":true,"signInAliases":{"email":true,"username":true},"standardAttributes":{},"userPoolName":"*"},{"addTrigger":[{},"*","*"]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicAppUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"aliasAttributes":["email"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"preSignUp":{"Fn::GetAtt":["PreSignUpLambda2E8F0430","Arn"]}},"mfaConfiguration":"OFF","policies":{"passwordPolicy":{"minimumLength":6,"requireLowercase":false,"requireUppercase":false,"requireNumbers":false,"requireSymbols":false}},"schema":[{"name":"birthdate","mutable":true,"required":true},{"name":"email","mutable":true,"required":true},{"name":"family_name","mutable":true,"required":true},{"name":"given_name","mutable":true,"required":true},{"name":"role","attributeDataType":"String","stringAttributeConstraints":{"minLength":"1","maxLength":"20"},"mutable":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolName":"music-app-user-pool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"MusicStreamingApp":{"id":"MusicStreamingApp","path":"BackendStack/MusicAppUserPool/MusicStreamingApp","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.215.0","metadata":[{"userPool":"*","accessTokenValidity":"*","authFlows":{"userPassword":true,"userSrp":true},"enableTokenRevocation":true,"generateSecret":false,"idTokenValidity":"*","preventUserExistenceErrors":true,"refreshTokenValidity":"*","userPoolClientName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicAppUserPool/MusicStreamingApp/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"music-streaming-client","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":7200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"MusicAppUserPool6D0B6B56"}}}}}},"PreSignUpCognito":{"id":"PreSignUpCognito","path":"BackendStack/MusicAppUserPool/PreSignUpCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PreSignUpLambda2E8F0430","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["MusicAppUserPool6D0B6B56","Arn"]}}}}}},"UserPoolId":{"id":"UserPoolId","path":"BackendStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"BackendStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"PreSignUpLambda":{"id":"PreSignUpLambda","path":"BackendStack/PreSignUpLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"code":"*","handler":"*","runtime":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/PreSignUpLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/PreSignUpLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/PreSignUpLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Resource":{"id":"Resource","path":"BackendStack/PreSignUpLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"def main(event, context):\n                # Auto-confirm user and auto-verify email\n                event['response']['autoConfirmUser'] = True\n                event['response']['autoVerifyEmail'] = True\n                return event\n            "},"handler":"index.main","role":{"Fn::GetAtt":["PreSignUpLambdaServiceRoleFA160DE8","Arn"]},"runtime":"python3.11"}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/PreSignUpLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/PreSignUpLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"PreSignUpLambda2E8F0430"}]]},"retentionInDays":731}}}}}}},"NewContentTopic":{"id":"NewContentTopic","path":"BackendStack/NewContentTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.215.0","metadata":[{"displayName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"NewContentTopic"}}}}},"NewContentQueue":{"id":"NewContentQueue","path":"BackendStack/NewContentQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.215.0","metadata":[{"queueName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"NewContentQueue"}}},"Policy":{"id":"Policy","path":"BackendStack/NewContentQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.215.0","metadata":[{"queues":["*"]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Ref":"NewContentTopicE1BD8C89"}}},"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":{"Fn::GetAtt":["NewContentQueueAAB7BE0E","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"NewContentQueueAAB7BE0E"}]}}}}},"BackendStackNewContentTopic6E806F6B":{"id":"BackendStackNewContentTopic6E806F6B","path":"BackendStack/NewContentQueue/BackendStackNewContentTopic6E806F6B","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.215.0","metadata":[{"topic":"*","endpoint":"*","protocol":"sqs","rawMessageDelivery":"*","filterPolicy":"*","filterPolicyWithMessageBody":"*","region":"*","deadLetterQueue":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentQueue/BackendStackNewContentTopic6E806F6B/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["NewContentQueueAAB7BE0E","Arn"]},"protocol":"sqs","topicArn":{"Ref":"NewContentTopicE1BD8C89"}}}}}}}},"SendEmailRole":{"id":"SendEmailRole","path":"BackendStack/SendEmailRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportSendEmailRole":{"id":"ImportSendEmailRole","path":"BackendStack/SendEmailRole/ImportSendEmailRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SendEmailRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SendEmailRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SendEmailRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},"/index/*"]]}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NewContentQueueAAB7BE0E","Arn"]}},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"SendEmailRoleDefaultPolicy8910A22C","roles":[{"Ref":"SendEmailRole539124E4"}]}}}}}}},"SendEmail":{"id":"SendEmail","path":"BackendStack/SendEmail","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SendEmail/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SendEmail/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SendEmail/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SendEmail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"3f8b3f25fbdb8a205535596cd4b44548b5dac424c1e1b1b9ef52c482910b6ef8.zip"},"environment":{"variables":{"SUBSCRIPTIONS_TABLE":{"Ref":"Subscriptions1F71F6D8"},"SES_REGION":"eu-central-1","SES_SOURCE_EMAIL":"milica.t.radic@gmail.com"}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SendEmailRole539124E4","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SendEmail/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SendEmail/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SendEmail14C26199"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SendEmail/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SendEmail/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SendEmail14C26199","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SendEmail/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SendEmail14C26199","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"SqsEventSource:BackendStackNewContentQueue0115C3D5":{"id":"SqsEventSource:BackendStackNewContentQueue0115C3D5","path":"BackendStack/SendEmail/SqsEventSource:BackendStackNewContentQueue0115C3D5","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.215.0","metadata":[{"target":"*","batchSize":"*","maxBatchingWindow":"*","maxConcurrency":"*","reportBatchItemFailures":"*","enabled":"*","eventSourceArn":"*","filters":"*","filterEncryption":"*","metricsConfig":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SendEmail/SqsEventSource:BackendStackNewContentQueue0115C3D5/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"eventSourceArn":{"Fn::GetAtt":["NewContentQueueAAB7BE0E","Arn"]},"functionName":{"Ref":"SendEmail14C26199"}}}}}}}},"my-music-app-transcriptions":{"id":"my-music-app-transcriptions","path":"BackendStack/my-music-app-transcriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.215.0","metadata":[{"blockPublicAccess":"*","cors":[{"allowedMethods":["GET"],"allowedOrigins":"*","allowedHeaders":"*"}],"publicReadAccess":true,"removalPolicy":"destroy","versioned":true},{"addCorsRule":[{"allowedMethods":["GET"],"allowedOrigins":"*","allowedHeaders":"*"},"*","*"]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/my-music-app-transcriptions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"corsConfiguration":{"corsRules":[{"allowedHeaders":["*"],"allowedMethods":["GET"],"allowedOrigins":["*"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":false,"ignorePublicAcls":true,"restrictPublicBuckets":false},"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"BackendStack/my-music-app-transcriptions/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.215.0","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/my-music-app-transcriptions/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"mymusicapptranscriptionsF7A3EEA7"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["mymusicapptranscriptionsF7A3EEA7","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"TranscriptionBucketURL":{"id":"TranscriptionBucketURL","path":"BackendStack/TranscriptionBucketURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"CreateTranscriptionJobRole":{"id":"CreateTranscriptionJobRole","path":"BackendStack/CreateTranscriptionJobRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportCreateTranscriptionJobRole":{"id":"ImportCreateTranscriptionJobRole","path":"BackendStack/CreateTranscriptionJobRole/ImportCreateTranscriptionJobRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/CreateTranscriptionJobRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/CreateTranscriptionJobRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CreateTranscriptionJobRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["transcribe:DeleteTranscriptionJob","transcribe:GetTranscriptionJob","transcribe:ListTranscriptionJobs","transcribe:StartTranscriptionJob"],"Effect":"Allow","Resource":"*"},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicapptranscriptionsF7A3EEA7","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicapptranscriptionsF7A3EEA7","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateTranscriptionJobRoleDefaultPolicy1C928B75","roles":[{"Ref":"CreateTranscriptionJobRoleA70BF20D"}]}}}}}}},"CreateTranscriptionJob":{"id":"CreateTranscriptionJob","path":"BackendStack/CreateTranscriptionJob","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/CreateTranscriptionJob/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/CreateTranscriptionJob/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/CreateTranscriptionJob/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/CreateTranscriptionJob/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"8d2e35048962c9065728db83cf642bf5a9407586f6f75551edae6358af2b31ef.zip"},"environment":{"variables":{"OUTPUT_BUCKET_NAME":{"Ref":"mymusicapptranscriptionsF7A3EEA7"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["CreateTranscriptionJobRoleA70BF20D","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/CreateTranscriptionJob/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CreateTranscriptionJob/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CreateTranscriptionJob918A5CDE"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/CreateTranscriptionJob/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CreateTranscriptionJob/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["CreateTranscriptionJob918A5CDE","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/CreateTranscriptionJob/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["CreateTranscriptionJob918A5CDE","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"CheckTranscriptionJobRole":{"id":"CheckTranscriptionJobRole","path":"BackendStack/CheckTranscriptionJobRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportCheckTranscriptionJobRole":{"id":"ImportCheckTranscriptionJobRole","path":"BackendStack/CheckTranscriptionJobRole/ImportCheckTranscriptionJobRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/CheckTranscriptionJobRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/CheckTranscriptionJobRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CheckTranscriptionJobRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["transcribe:DeleteTranscriptionJob","transcribe:GetTranscriptionJob","transcribe:ListTranscriptionJobs","transcribe:StartTranscriptionJob"],"Effect":"Allow","Resource":"*"},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicapptranscriptionsF7A3EEA7","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicapptranscriptionsF7A3EEA7","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CheckTranscriptionJobRoleDefaultPolicy0EAD90F7","roles":[{"Ref":"CheckTranscriptionJobRoleA9CDD01C"}]}}}}}}},"CheckTranscriptionJob":{"id":"CheckTranscriptionJob","path":"BackendStack/CheckTranscriptionJob","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/CheckTranscriptionJob/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/CheckTranscriptionJob/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/CheckTranscriptionJob/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/CheckTranscriptionJob/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"9caaa1b0d8b40bd02c50e84bb28bafac09c5ef4ddcc039adfd7cbab8aa52eed8.zip"},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["CheckTranscriptionJobRoleA9CDD01C","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/CheckTranscriptionJob/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CheckTranscriptionJob/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"CheckTranscriptionJob97165C43"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/CheckTranscriptionJob/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CheckTranscriptionJob/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["CheckTranscriptionJob97165C43","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/CheckTranscriptionJob/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["CheckTranscriptionJob97165C43","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"SaveTranscriptRole":{"id":"SaveTranscriptRole","path":"BackendStack/SaveTranscriptRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportSaveTranscriptRole":{"id":"ImportSaveTranscriptRole","path":"BackendStack/SaveTranscriptRole/ImportSaveTranscriptRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SaveTranscriptRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SaveTranscriptRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SaveTranscriptRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SaveTranscriptRoleDefaultPolicyF43385B6","roles":[{"Ref":"SaveTranscriptRoleADD27B2E"}]}}}}}}},"SaveTranscript":{"id":"SaveTranscript","path":"BackendStack/SaveTranscript","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SaveTranscript/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SaveTranscript/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SaveTranscript/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SaveTranscript/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"5c1dc4e5b069fb205c9882e3602ee910f0ed76bb28a2920c718d058db05b6f97.zip"},"environment":{"variables":{"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"SONGS_TABLE_PK":"Album","SONGS_TABLE_SK":"Id"}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SaveTranscriptRoleADD27B2E","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SaveTranscript/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SaveTranscript/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SaveTranscript8BA2E573"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SaveTranscript/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SaveTranscript/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SaveTranscript8BA2E573","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SaveTranscript/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SaveTranscript8BA2E573","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"CreateTranscriptionJobTask":{"id":"CreateTranscriptionJobTask","path":"BackendStack/CreateTranscriptionJobTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.215.0"}},"WaitForTranscription":{"id":"WaitForTranscription","path":"BackendStack/WaitForTranscription","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Wait","version":"2.215.0"}},"CheckTranscriptionJobTask":{"id":"CheckTranscriptionJobTask","path":"BackendStack/CheckTranscriptionJobTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.215.0"}},"SaveTranscriptTask":{"id":"SaveTranscriptTask","path":"BackendStack/SaveTranscriptTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.215.0"}},"HandleFailure":{"id":"HandleFailure","path":"BackendStack/HandleFailure","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.215.0"}},"RetryJob":{"id":"RetryJob","path":"BackendStack/RetryJob","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.215.0"}},"JobSucceeded":{"id":"JobSucceeded","path":"BackendStack/JobSucceeded","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Succeed","version":"2.215.0"}},"JobFailed":{"id":"JobFailed","path":"BackendStack/JobFailed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.215.0"}},"CheckRetryLimit":{"id":"CheckRetryLimit","path":"BackendStack/CheckRetryLimit","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.215.0"}},"EvaluateJobStatus":{"id":"EvaluateJobStatus","path":"BackendStack/EvaluateJobStatus","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.215.0"}},"TranscriptionStateMachine":{"id":"TranscriptionStateMachine","path":"BackendStack/TranscriptionStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.215.0","metadata":[{"definitionBody":"*","timeout":"*"},{"addToRolePolicy":[{}]},{"addToRolePolicy":[{}]},{"addToRolePolicy":[{}]}]},"children":{"Role":{"id":"Role","path":"BackendStack/TranscriptionStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportRole":{"id":"ImportRole","path":"BackendStack/TranscriptionStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/TranscriptionStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/TranscriptionStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/TranscriptionStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["CheckTranscriptionJob97165C43","Arn"]},{"Fn::GetAtt":["CreateTranscriptionJob918A5CDE","Arn"]},{"Fn::GetAtt":["SaveTranscript8BA2E573","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CheckTranscriptionJob97165C43","Arn"]},":*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["CreateTranscriptionJob918A5CDE","Arn"]},":*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SaveTranscript8BA2E573","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"TranscriptionStateMachineRoleDefaultPolicyC5AB5EF9","roles":[{"Ref":"TranscriptionStateMachineRole85C37D21"}]}}}}}}},"Resource":{"id":"Resource","path":"BackendStack/TranscriptionStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"CreateTranscriptionJobTask\",\"States\":{\"CreateTranscriptionJobTask\":{\"Next\":\"WaitForTranscription\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.createJobResult\",\"ResultSelector\":{\"jobName.$\":\"$.Payload.jobName\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["CreateTranscriptionJob918A5CDE","Arn"]},"\",\"Payload\":{\"songId.$\":\"$.songId\",\"songFilePath.$\":\"$.songFilePath\"}}},\"RetryJob\":{\"Type\":\"Pass\",\"Parameters\":{\"songId.$\":\"$.songId\",\"songFilePath.$\":\"$.songFilePath\",\"retryCount.$\":\"$.retryInfo.retryCount\"},\"Next\":\"CreateTranscriptionJobTask\"},\"CheckRetryLimit\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.retryInfo.retryCount\",\"NumericLessThan\":5,\"Next\":\"RetryJob\"}],\"Default\":\"JobFailed\"},\"HandleFailure\":{\"Type\":\"Pass\",\"ResultPath\":\"$.retryInfo\",\"Parameters\":{\"retryCount.$\":\"States.MathAdd($.retryCount, 1)\"},\"Next\":\"CheckRetryLimit\"},\"EvaluateJobStatus\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.checkJobResult.status\",\"StringEquals\":\"COMPLETED\",\"Next\":\"SaveTranscriptTask\"},{\"Variable\":\"$.checkJobResult.status\",\"StringEquals\":\"FAILED\",\"Next\":\"HandleFailure\"},{\"Variable\":\"$.checkJobResult.status\",\"StringEquals\":\"IN_PROGRESS\",\"Next\":\"WaitForTranscription\"},{\"Variable\":\"$.checkJobResult.status\",\"StringEquals\":\"QUEUED\",\"Next\":\"WaitForTranscription\"}],\"Default\":\"WaitForTranscription\"},\"CheckTranscriptionJobTask\":{\"Next\":\"EvaluateJobStatus\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.checkJobResult\",\"ResultSelector\":{\"status.$\":\"$.Payload.status\",\"transcriptFilePath.$\":\"$.Payload.transcriptFilePath\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["CheckTranscriptionJob97165C43","Arn"]},"\",\"Payload\":{\"jobName.$\":\"$.createJobResult.jobName\"}}},\"WaitForTranscription\":{\"Type\":\"Wait\",\"Seconds\":3,\"Next\":\"CheckTranscriptionJobTask\"},\"SaveTranscriptTask\":{\"Next\":\"JobSucceeded\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.saveResult\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["SaveTranscript8BA2E573","Arn"]},"\",\"Payload\":{\"songId.$\":\"$.songId\",\"jobName.$\":\"$.createJobResult.jobName\"}}},\"JobSucceeded\":{\"Type\":\"Succeed\"},\"JobFailed\":{\"Type\":\"Fail\",\"Error\":\"TranscriptionJobFailed\",\"Cause\":\"The transcription job failed after maximum retries or encountered an error\"}},\"TimeoutSeconds\":1800}"]]},"roleArn":{"Fn::GetAtt":["TranscriptionStateMachineRole85C37D21","Arn"]}}}}}},"NewTranscriptionTopic":{"id":"NewTranscriptionTopic","path":"BackendStack/NewTranscriptionTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.215.0","metadata":[{"displayName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewTranscriptionTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"NewTranscriptionTopic"}}}}},"NewTranscriptionQueue":{"id":"NewTranscriptionQueue","path":"BackendStack/NewTranscriptionQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.215.0","metadata":[{"queueName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewTranscriptionQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"NewTranscriptionQueue"}}},"Policy":{"id":"Policy","path":"BackendStack/NewTranscriptionQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.215.0","metadata":[{"queues":["*"]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewTranscriptionQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Ref":"NewTranscriptionTopic35BD0946"}}},"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":{"Fn::GetAtt":["NewTranscriptionQueueFC701FC5","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"NewTranscriptionQueueFC701FC5"}]}}}}},"BackendStackNewTranscriptionTopic6EE883ED":{"id":"BackendStackNewTranscriptionTopic6EE883ED","path":"BackendStack/NewTranscriptionQueue/BackendStackNewTranscriptionTopic6EE883ED","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.215.0","metadata":[{"topic":"*","endpoint":"*","protocol":"sqs","rawMessageDelivery":"*","filterPolicy":"*","filterPolicyWithMessageBody":"*","region":"*","deadLetterQueue":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewTranscriptionQueue/BackendStackNewTranscriptionTopic6EE883ED/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["NewTranscriptionQueueFC701FC5","Arn"]},"protocol":"sqs","topicArn":{"Ref":"NewTranscriptionTopic35BD0946"}}}}}}}},"HandleNewTranscriptionRole":{"id":"HandleNewTranscriptionRole","path":"BackendStack/HandleNewTranscriptionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportHandleNewTranscriptionRole":{"id":"ImportHandleNewTranscriptionRole","path":"BackendStack/HandleNewTranscriptionRole/ImportHandleNewTranscriptionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/HandleNewTranscriptionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/HandleNewTranscriptionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/HandleNewTranscriptionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NewTranscriptionQueueFC701FC5","Arn"]}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"TranscriptionStateMachineDB9F5878"}}],"Version":"2012-10-17"},"policyName":"HandleNewTranscriptionRoleDefaultPolicy159F3CE7","roles":[{"Ref":"HandleNewTranscriptionRole1378E156"}]}}}}}}},"HandleNewTranscription":{"id":"HandleNewTranscription","path":"BackendStack/HandleNewTranscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/HandleNewTranscription/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/HandleNewTranscription/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/HandleNewTranscription/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/HandleNewTranscription/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a0149070421a29b8cee495b1981df98d49489679cdcf8e12a94c8416087252b0.zip"},"environment":{"variables":{"MUSIC_BUCKET_NAME":{"Ref":"mymusicappfilesAC4E028D"},"TRANSCRIPTION_STEP_FUNCTION_ARN":{"Ref":"TranscriptionStateMachineDB9F5878"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["HandleNewTranscriptionRole1378E156","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/HandleNewTranscription/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/HandleNewTranscription/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"HandleNewTranscription38685EDB"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/HandleNewTranscription/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/HandleNewTranscription/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["HandleNewTranscription38685EDB","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/HandleNewTranscription/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["HandleNewTranscription38685EDB","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"SqsEventSource:BackendStackNewTranscriptionQueueED31902F":{"id":"SqsEventSource:BackendStackNewTranscriptionQueueED31902F","path":"BackendStack/HandleNewTranscription/SqsEventSource:BackendStackNewTranscriptionQueueED31902F","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.215.0","metadata":[{"target":"*","batchSize":"*","maxBatchingWindow":"*","maxConcurrency":"*","reportBatchItemFailures":"*","enabled":"*","eventSourceArn":"*","filters":"*","filterEncryption":"*","metricsConfig":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/HandleNewTranscription/SqsEventSource:BackendStackNewTranscriptionQueueED31902F/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"eventSourceArn":{"Fn::GetAtt":["NewTranscriptionQueueFC701FC5","Arn"]},"functionName":{"Ref":"HandleNewTranscription38685EDB"}}}}}}}},"MusicStreamingApi":{"id":"MusicStreamingApi","path":"BackendStack/MusicStreamingApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.215.0","metadata":[{"defaultCorsPreflightOptions":{"allowOrigins":"*","allowMethods":"*"},"deployOptions":{"throttlingBurstLimit":"*","throttlingRateLimit":"*","stageName":"*"},"restApiName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"MusicStreamingApi"}}},"Deployment":{"id":"Deployment","path":"BackendStack/MusicStreamingApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.215.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"DeploymentStage.dev":{"id":"DeploymentStage.dev","path":"BackendStack/MusicStreamingApi/DeploymentStage.dev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.215.0","metadata":[{"deployment":"*","throttlingBurstLimit":"*","throttlingRateLimit":"*","stageName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/DeploymentStage.dev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"MusicStreamingApiDeployment8B4E5256f5a4453d710161dad0fceb6131a4c1cd"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":false,"throttlingBurstLimit":200,"throttlingRateLimit":100}],"restApiId":{"Ref":"MusicStreamingApiC954D41A"},"stageName":"dev"}}}}},"Endpoint":{"id":"Endpoint","path":"BackendStack/MusicStreamingApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.215.0"}},"Default":{"id":"Default","path":"BackendStack/MusicStreamingApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.215.0","metadata":["*"]},"children":{"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"artists":{"id":"artists","path":"BackendStack/MusicStreamingApi/Default/artists","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"artists","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/artists/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApiartists29F56A20"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"POST":{"id":"POST","path":"BackendStack/MusicStreamingApi/Default/artists/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..artists":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..artists","path":"BackendStack/MusicStreamingApi/Default/artists/POST/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..artists","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructCreateArtistLambdaF144778B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/POST/artists"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..artists":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..artists","path":"BackendStack/MusicStreamingApi/Default/artists/POST/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..artists","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructCreateArtistLambdaF144778B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/POST/artists"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ArtistsConstructCreateArtistLambdaF144778B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApiartists29F56A20"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/artists/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":"*"}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..artists":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..artists","path":"BackendStack/MusicStreamingApi/Default/artists/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..artists","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructGetArtistsLambda021C89D7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/artists"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..artists":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..artists","path":"BackendStack/MusicStreamingApi/Default/artists/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..artists","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructGetArtistsLambda021C89D7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/artists"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ArtistsConstructGetArtistsLambda021C89D7","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApiartists29F56A20"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"{id}":{"id":"{id}","path":"BackendStack/MusicStreamingApi/Default/artists/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApiartists29F56A20"},"pathPart":"{id}","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApiartistsid07892E02"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"DELETE":{"id":"DELETE","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..artists.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..artists.{id}","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/DELETE/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..artists.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructDeleteArtistLambda18C5C4BB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/DELETE/artists/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..artists.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..artists.{id}","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/DELETE/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..artists.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructDeleteArtistLambda18C5C4BB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/DELETE/artists/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ArtistsConstructDeleteArtistLambda18C5C4BB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApiartistsid07892E02"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..artists.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..artists.{id}","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..artists.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructGetArtistByIdLambda9F00C22E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/artists/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..artists.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..artists.{id}","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..artists.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ArtistsConstructGetArtistByIdLambda9F00C22E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/artists/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/artists/{id}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ArtistsConstructGetArtistByIdLambda9F00C22E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApiartistsid07892E02"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}}}},"songs":{"id":"songs","path":"BackendStack/MusicStreamingApi/Default/songs","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"songs","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/songs/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApisongs22D9C1ED"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"POST":{"id":"POST","path":"BackendStack/MusicStreamingApi/Default/songs/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..songs":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..songs","path":"BackendStack/MusicStreamingApi/Default/songs/POST/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..songs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructUploadFileLambdaEA442856","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/POST/songs"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..songs":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..songs","path":"BackendStack/MusicStreamingApi/Default/songs/POST/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..songs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructUploadFileLambdaEA442856","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/POST/songs"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructUploadFileLambdaEA442856","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongs22D9C1ED"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/songs/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs","path":"BackendStack/MusicStreamingApi/Default/songs/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructGetSongsLambda6144445D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/songs"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs","path":"BackendStack/MusicStreamingApi/Default/songs/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructGetSongsLambda6144445D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/songs"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructGetSongsLambda6144445D","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongs22D9C1ED"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"{id}":{"id":"{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApisongs22D9C1ED"},"pathPart":"{id}","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApisongsid93B22B2E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"PUT":{"id":"PUT","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.PUT..songs.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.PUT..songs.{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/PUT/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.PUT..songs.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructUpdateSongLambda8037EF22","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/PUT/songs/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.PUT..songs.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.PUT..songs.{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/PUT/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.PUT..songs.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructUpdateSongLambda8037EF22","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/PUT/songs/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructUpdateSongLambda8037EF22","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongsid93B22B2E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"DELETE":{"id":"DELETE","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..songs.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..songs.{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/DELETE/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..songs.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructDeleteSongLambda3C147F9C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/DELETE/songs/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..songs.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..songs.{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/DELETE/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..songs.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructDeleteSongLambda3C147F9C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/DELETE/songs/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructDeleteSongLambda3C147F9C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongsid93B22B2E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructGetSongLambdaE803F1EA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/songs/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructGetSongLambdaE803F1EA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/songs/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructGetSongLambdaE803F1EA","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongsid93B22B2E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"rating":{"id":"rating","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApisongsid93B22B2E"},"pathPart":"rating","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApisongsidrating2BB3D202"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"POST":{"id":"POST","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..songs.{id}.rating":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..songs.{id}.rating","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/POST/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..songs.{id}.rating","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructRateSongLambda6B27F156","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/POST/songs/*/rating"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..songs.{id}.rating":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..songs.{id}.rating","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/POST/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..songs.{id}.rating","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructRateSongLambda6B27F156","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/POST/songs/*/rating"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructRateSongLambda6B27F156","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongsidrating2BB3D202"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.rating":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.rating","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.rating","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructGetSongRatingLambda72CC02E9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/songs/*/rating"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.rating":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.rating","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.rating","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SongsConstructGetSongRatingLambda72CC02E9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/songs/*/rating"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/rating/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SongsConstructGetSongRatingLambda72CC02E9","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongsidrating2BB3D202"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}},"presigned-url":{"id":"presigned-url","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApisongsid93B22B2E"},"pathPart":"presigned-url","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApisongsidpresignedurl75763C3E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.presigned-url":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.presigned-url","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.presigned-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/songs/*/presigned-url"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.presigned-url":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.presigned-url","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..songs.{id}.presigned-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/songs/*/presigned-url"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/songs/{id}/presigned-url/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisongsidpresignedurl75763C3E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}}}}}},"albums":{"id":"albums","path":"BackendStack/MusicStreamingApi/Default/albums","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"albums","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/albums/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApialbums6CBF36F7"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"POST":{"id":"POST","path":"BackendStack/MusicStreamingApi/Default/albums/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..albums":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..albums","path":"BackendStack/MusicStreamingApi/Default/albums/POST/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..albums","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructCreateAlbumLambda9E7DAC17","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/POST/albums"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..albums":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..albums","path":"BackendStack/MusicStreamingApi/Default/albums/POST/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..albums","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructCreateAlbumLambda9E7DAC17","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/POST/albums"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AlbumConstructCreateAlbumLambda9E7DAC17","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApialbums6CBF36F7"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/albums/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..albums":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..albums","path":"BackendStack/MusicStreamingApi/Default/albums/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..albums","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructGetAlbumsLambda214F25FB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/albums"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..albums":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..albums","path":"BackendStack/MusicStreamingApi/Default/albums/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..albums","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructGetAlbumsLambda214F25FB","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/albums"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AlbumConstructGetAlbumsLambda214F25FB","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApialbums6CBF36F7"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"{id}":{"id":"{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApialbums6CBF36F7"},"pathPart":"{id}","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApialbumsid8B166948"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"PUT":{"id":"PUT","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.PUT..albums.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.PUT..albums.{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/PUT/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.PUT..albums.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructUpdateAlbumLambdaB9632FEC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/PUT/albums/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.PUT..albums.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.PUT..albums.{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/PUT/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.PUT..albums.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructUpdateAlbumLambdaB9632FEC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/PUT/albums/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AlbumConstructUpdateAlbumLambdaB9632FEC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApialbumsid8B166948"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"DELETE":{"id":"DELETE","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..albums.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..albums.{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/DELETE/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..albums.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructDeleteAlbumLambda63B51E55","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/DELETE/albums/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..albums.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..albums.{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/DELETE/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..albums.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructDeleteAlbumLambda63B51E55","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/DELETE/albums/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AlbumConstructDeleteAlbumLambda63B51E55","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApialbumsid8B166948"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..albums.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..albums.{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..albums.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructGetAlbumByIdLambda4E204135","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/albums/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..albums.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..albums.{id}","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..albums.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AlbumConstructGetAlbumByIdLambda4E204135","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/albums/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/albums/{id}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AlbumConstructGetAlbumByIdLambda4E204135","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApialbumsid8B166948"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}}}},"subscriptions":{"id":"subscriptions","path":"BackendStack/MusicStreamingApi/Default/subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"subscriptions","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/subscriptions/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApisubscriptions9159F36E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"POST":{"id":"POST","path":"BackendStack/MusicStreamingApi/Default/subscriptions/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..subscriptions":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..subscriptions","path":"BackendStack/MusicStreamingApi/Default/subscriptions/POST/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsConstructCreateSubscriptionLambdaC57285D3","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/POST/subscriptions"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..subscriptions":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..subscriptions","path":"BackendStack/MusicStreamingApi/Default/subscriptions/POST/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsConstructCreateSubscriptionLambdaC57285D3","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/POST/subscriptions"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SubscriptionsConstructCreateSubscriptionLambdaC57285D3","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisubscriptions9159F36E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/subscriptions/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..subscriptions":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..subscriptions","path":"BackendStack/MusicStreamingApi/Default/subscriptions/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsConstructGetSubscriptionsLambda79C7D049","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/subscriptions"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..subscriptions":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..subscriptions","path":"BackendStack/MusicStreamingApi/Default/subscriptions/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsConstructGetSubscriptionsLambda79C7D049","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/subscriptions"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SubscriptionsConstructGetSubscriptionsLambda79C7D049","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisubscriptions9159F36E"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"{id}":{"id":"{id}","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApisubscriptions9159F36E"},"pathPart":"{id}","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApisubscriptionsid48669B32"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"DELETE":{"id":"DELETE","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..subscriptions.{id}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..subscriptions.{id}","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/DELETE/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.DELETE..subscriptions.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsConstructDeleteSubscriptionLambda744D28CE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/DELETE/subscriptions/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..subscriptions.{id}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..subscriptions.{id}","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/DELETE/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.DELETE..subscriptions.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsConstructDeleteSubscriptionLambda744D28CE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/DELETE/subscriptions/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/subscriptions/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SubscriptionsConstructDeleteSubscriptionLambda744D28CE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApisubscriptionsid48669B32"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}}}},"listening-history":{"id":"listening-history","path":"BackendStack/MusicStreamingApi/Default/listening-history","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/listening-history/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"listening-history","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/listening-history/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/listening-history/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApilisteninghistory14D30697"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"POST":{"id":"POST","path":"BackendStack/MusicStreamingApi/Default/listening-history/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..listening-history":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..listening-history","path":"BackendStack/MusicStreamingApi/Default/listening-history/POST/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.POST..listening-history","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListeningHistoryConstructRecordListenLambda5455361E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/POST/listening-history"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..listening-history":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..listening-history","path":"BackendStack/MusicStreamingApi/Default/listening-history/POST/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.POST..listening-history","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListeningHistoryConstructRecordListenLambda5455361E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/POST/listening-history"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/listening-history/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListeningHistoryConstructRecordListenLambda5455361E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApilisteninghistory14D30697"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/listening-history/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..listening-history":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..listening-history","path":"BackendStack/MusicStreamingApi/Default/listening-history/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..listening-history","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListeningHistoryConstructGetListeningHistoryLambda9F99BDF2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/listening-history"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..listening-history":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..listening-history","path":"BackendStack/MusicStreamingApi/Default/listening-history/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..listening-history","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListeningHistoryConstructGetListeningHistoryLambda9F99BDF2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/listening-history"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/listening-history/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListeningHistoryConstructGetListeningHistoryLambda9F99BDF2","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApilisteninghistory14D30697"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}},"feed":{"id":"feed","path":"BackendStack/MusicStreamingApi/Default/feed","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/feed/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"feed","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/feed/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/feed/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApifeedC178DD42"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/feed/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*","authorizer":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..feed":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..feed","path":"BackendStack/MusicStreamingApi/Default/feed/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FeedConstructGetFeedLambda0D478810","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/feed"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..feed":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..feed","path":"BackendStack/MusicStreamingApi/Default/feed/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["FeedConstructGetFeedLambda0D478810","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/feed"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/feed/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["FeedConstructGetFeedLambda0D478810","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApifeedC178DD42"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}},"discover":{"id":"discover","path":"BackendStack/MusicStreamingApi/Default/discover","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/discover/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"discover","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/discover/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/discover/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApidiscover3B2C724F"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"filter":{"id":"filter","path":"BackendStack/MusicStreamingApi/Default/discover/filter","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/discover/filter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApidiscover3B2C724F"},"pathPart":"filter","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/discover/filter/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/discover/filter/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApidiscoverfilterC7329518"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/discover/filter/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":"*"}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..discover.filter":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..discover.filter","path":"BackendStack/MusicStreamingApi/Default/discover/filter/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..discover.filter","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetFilteredContentLambda838D3EFC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/discover/filter"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..discover.filter":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..discover.filter","path":"BackendStack/MusicStreamingApi/Default/discover/filter/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..discover.filter","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetFilteredContentLambda838D3EFC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/discover/filter"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/discover/filter/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetFilteredContentLambda838D3EFC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApidiscoverfilterC7329518"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}}}},"download":{"id":"download","path":"BackendStack/MusicStreamingApi/Default/download","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/download/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MusicStreamingApiC954D41A","RootResourceId"]},"pathPart":"download","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/download/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/download/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApidownloadEC16F164"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"{songId}":{"id":"{songId}","path":"BackendStack/MusicStreamingApi/Default/download/{songId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.215.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MusicStreamingApidownloadEC16F164"},"pathPart":"{songId}","restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MusicStreamingApidownloadsongId48824392"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}},"GET":{"id":"GET","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.215.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizationType":"*"}}]},"children":{"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..download.{songId}":{"id":"ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..download.{songId}","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/GET/ApiPermission.BackendStackMusicStreamingApi93A5F8E3.GET..download.{songId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/",{"Ref":"MusicStreamingApiDeploymentStagedev4D4FE2C4"},"/GET/download/*"]]}}}},"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..download.{songId}":{"id":"ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..download.{songId}","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/GET/ApiPermission.Test.BackendStackMusicStreamingApi93A5F8E3.GET..download.{songId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"MusicStreamingApiC954D41A"},"/test-invoke-stage/GET/download/*"]]}}}},"Resource":{"id":"Resource","path":"BackendStack/MusicStreamingApi/Default/download/{songId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"MusicStreamingApidownloadsongId48824392"},"restApiId":{"Ref":"MusicStreamingApiC954D41A"}}}}}}}}}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"BackendStack/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.215.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"BackendStack/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"BackendStackCognitoAuthorizerD02D578C","providerArns":[{"Fn::GetAtt":["MusicAppUserPool6D0B6B56","Arn"]}],"restApiId":{"Ref":"MusicStreamingApiC954D41A"},"type":"COGNITO_USER_POOLS"}}}}},"ArtistsConstruct":{"id":"ArtistsConstruct","path":"BackendStack/ArtistsConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CreateArtistLambdaRole":{"id":"CreateArtistLambdaRole","path":"BackendStack/ArtistsConstruct/CreateArtistLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportCreateArtistLambdaRole":{"id":"ImportCreateArtistLambdaRole","path":"BackendStack/ArtistsConstruct/CreateArtistLambdaRole/ImportCreateArtistLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/CreateArtistLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ArtistsConstruct/CreateArtistLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/CreateArtistLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ArtistsConstructCreateArtistLambdaRoleDefaultPolicyE0C6C7CB","roles":[{"Ref":"ArtistsConstructCreateArtistLambdaRoleBEE5A87D"}]}}}}}}},"CreateArtistLambda":{"id":"CreateArtistLambda","path":"BackendStack/ArtistsConstruct/CreateArtistLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"67037c19d449b68d77febac3ebb5807796b44a9bfbcb60926b7b2731cad67290.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"ArtistsAF1BB04E"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["ArtistsConstructCreateArtistLambdaRoleBEE5A87D","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ArtistsConstructCreateArtistLambdaF144778B"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ArtistsConstructCreateArtistLambdaF144778B","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ArtistsConstruct/CreateArtistLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ArtistsConstructCreateArtistLambdaF144778B","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetArtistsLambdaRole":{"id":"GetArtistsLambdaRole","path":"BackendStack/ArtistsConstruct/GetArtistsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportGetArtistsLambdaRole":{"id":"ImportGetArtistsLambdaRole","path":"BackendStack/ArtistsConstruct/GetArtistsLambdaRole/ImportGetArtistsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistsLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ArtistsConstruct/GetArtistsLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistsLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ArtistsConstructGetArtistsLambdaRoleDefaultPolicy9972E22B","roles":[{"Ref":"ArtistsConstructGetArtistsLambdaRole40BF39E7"}]}}}}}}},"GetArtistsLambda":{"id":"GetArtistsLambda","path":"BackendStack/ArtistsConstruct/GetArtistsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"45a1a4808f0cb411220f4fe87d1b5172905a7d59bae4a6a3548cbd89b8cc9550.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"ArtistsAF1BB04E"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["ArtistsConstructGetArtistsLambdaRole40BF39E7","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ArtistsConstructGetArtistsLambda021C89D7"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ArtistsConstructGetArtistsLambda021C89D7","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ArtistsConstruct/GetArtistsLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ArtistsConstructGetArtistsLambda021C89D7","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"DeleteArtistLambdaRole":{"id":"DeleteArtistLambdaRole","path":"BackendStack/ArtistsConstruct/DeleteArtistLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportDeleteArtistLambdaRole":{"id":"ImportDeleteArtistLambdaRole","path":"BackendStack/ArtistsConstruct/DeleteArtistLambdaRole/ImportDeleteArtistLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/DeleteArtistLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ArtistsConstruct/DeleteArtistLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/DeleteArtistLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ArtistsConstructDeleteArtistLambdaRoleDefaultPolicyBB6BE7C2","roles":[{"Ref":"ArtistsConstructDeleteArtistLambdaRole809622E6"}]}}}}}}},"DeleteArtistLambda":{"id":"DeleteArtistLambda","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"3e100278c0d126cc011b889b58950c4e661cb24d8fcdc99f10666739ed039f84.zip"},"environment":{"variables":{"ARTISTS_TABLE":{"Ref":"ArtistsAF1BB04E"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTIST_ALBUM_TABLE":{"Ref":"ArtistAlbum6D4E520D"},"ARTIST_SONG_TABLE":{"Ref":"ArtistSong600154F0"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["ArtistsConstructDeleteArtistLambdaRole809622E6","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ArtistsConstructDeleteArtistLambda18C5C4BB"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ArtistsConstructDeleteArtistLambda18C5C4BB","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ArtistsConstruct/DeleteArtistLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ArtistsConstructDeleteArtistLambda18C5C4BB","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetArtistByIdLambdaRole":{"id":"GetArtistByIdLambdaRole","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportGetArtistByIdLambdaRole":{"id":"ImportGetArtistByIdLambdaRole","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambdaRole/ImportGetArtistByIdLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ArtistsConstructGetArtistByIdLambdaRoleDefaultPolicyDEC2BFDE","roles":[{"Ref":"ArtistsConstructGetArtistByIdLambdaRole75733797"}]}}}}}}},"GetArtistByIdLambda":{"id":"GetArtistByIdLambda","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"e46c40d2169e5bf381ba0dc37632435a0159a4ed8befc4d08063f7186cd71306.zip"},"environment":{"variables":{"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTIST_ALBUM_TABLE":{"Ref":"ArtistAlbum6D4E520D"},"ARTISTS_TABLE":{"Ref":"ArtistsAF1BB04E"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ARTIST_SONG_TABLE":{"Ref":"ArtistSong600154F0"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["ArtistsConstructGetArtistByIdLambdaRole75733797","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ArtistsConstructGetArtistByIdLambda9F00C22E"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ArtistsConstructGetArtistByIdLambda9F00C22E","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ArtistsConstruct/GetArtistByIdLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ArtistsConstructGetArtistByIdLambda9F00C22E","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}}}},"SongsConstruct":{"id":"SongsConstruct","path":"BackendStack/SongsConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"UploadFileLambdaRole":{"id":"UploadFileLambdaRole","path":"BackendStack/SongsConstruct/UploadFileLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportUploadFileLambdaRole":{"id":"ImportUploadFileLambdaRole","path":"BackendStack/SongsConstruct/UploadFileLambdaRole/ImportUploadFileLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UploadFileLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/UploadFileLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UploadFileLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":[{"Ref":"NewContentTopicE1BD8C89"},{"Ref":"NewTranscriptionTopic35BD0946"}]}],"Version":"2012-10-17"},"policyName":"SongsConstructUploadFileLambdaRoleDefaultPolicyA6BF6CA8","roles":[{"Ref":"SongsConstructUploadFileLambdaRole56100D5C"}]}}}}}}},"UploadFileLambda":{"id":"UploadFileLambda","path":"BackendStack/SongsConstruct/UploadFileLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/UploadFileLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/UploadFileLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/UploadFileLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UploadFileLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"321517e165e8e4ca4c02c85b50b429161edaaf648cdc3270e0dd3899a5c5e09c.zip"},"environment":{"variables":{"BUCKET_NAME":{"Ref":"mymusicappfilesAC4E028D"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ARTIST_SONG_TABLE":{"Ref":"ArtistSong600154F0"},"SNS_NEW_CONTENT_ARN":{"Ref":"NewContentTopicE1BD8C89"},"SNS_NEW_TRANSCRIPTION_ARN":{"Ref":"NewTranscriptionTopic35BD0946"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructUploadFileLambdaRole56100D5C","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/UploadFileLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UploadFileLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructUploadFileLambdaEA442856"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/UploadFileLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UploadFileLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructUploadFileLambdaEA442856","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/UploadFileLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructUploadFileLambdaEA442856","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetSongsLambdaRole":{"id":"GetSongsLambdaRole","path":"BackendStack/SongsConstruct/GetSongsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportGetSongsLambdaRole":{"id":"ImportGetSongsLambdaRole","path":"BackendStack/SongsConstruct/GetSongsLambdaRole/ImportGetSongsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongsLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/GetSongsLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongsLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SongsConstructGetSongsLambdaRoleDefaultPolicy06C36B64","roles":[{"Ref":"SongsConstructGetSongsLambdaRole320C57CE"}]}}}}}}},"GetSongsLambda":{"id":"GetSongsLambda","path":"BackendStack/SongsConstruct/GetSongsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/GetSongsLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/GetSongsLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/GetSongsLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"910b979ef9a71ac0a0f094edea17dee2e561cd886b7445e5a346f800985d4659.zip"},"environment":{"variables":{"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructGetSongsLambdaRole320C57CE","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/GetSongsLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongsLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructGetSongsLambda6144445D"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/GetSongsLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongsLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructGetSongsLambda6144445D","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/GetSongsLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructGetSongsLambda6144445D","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"UpdateSongLambdaRole":{"id":"UpdateSongLambdaRole","path":"BackendStack/SongsConstruct/UpdateSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportUpdateSongLambdaRole":{"id":"ImportUpdateSongLambdaRole","path":"BackendStack/SongsConstruct/UpdateSongLambdaRole/ImportUpdateSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UpdateSongLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/UpdateSongLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UpdateSongLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"NewTranscriptionTopic35BD0946"}}],"Version":"2012-10-17"},"policyName":"SongsConstructUpdateSongLambdaRoleDefaultPolicy6F31203F","roles":[{"Ref":"SongsConstructUpdateSongLambdaRole2B9F876F"}]}}}}}}},"UpdateSongLambda":{"id":"UpdateSongLambda","path":"BackendStack/SongsConstruct/UpdateSongLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/UpdateSongLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/UpdateSongLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/UpdateSongLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UpdateSongLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"ff93983b6b78278d0858798f4e08bdecdbf17c9c0f04b4e732741d987bfa2f47.zip"},"environment":{"variables":{"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTIST_SONG_TABLE":{"Ref":"ArtistSong600154F0"},"BUCKET_NAME":{"Ref":"mymusicappfilesAC4E028D"},"SNS_NEW_TRANSCRIPTION_ARN":{"Ref":"NewTranscriptionTopic35BD0946"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructUpdateSongLambdaRole2B9F876F","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/UpdateSongLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UpdateSongLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructUpdateSongLambda8037EF22"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/UpdateSongLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/UpdateSongLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructUpdateSongLambda8037EF22","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/UpdateSongLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructUpdateSongLambda8037EF22","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"DeleteSongLambdaRole":{"id":"DeleteSongLambdaRole","path":"BackendStack/SongsConstruct/DeleteSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportDeleteSongLambdaRole":{"id":"ImportDeleteSongLambdaRole","path":"BackendStack/SongsConstruct/DeleteSongLambdaRole/ImportDeleteSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/DeleteSongLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/DeleteSongLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/DeleteSongLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SongsConstructDeleteSongLambdaRoleDefaultPolicy49002D0D","roles":[{"Ref":"SongsConstructDeleteSongLambdaRoleFEA229E4"}]}}}}}}},"DeleteSongLambda":{"id":"DeleteSongLambda","path":"BackendStack/SongsConstruct/DeleteSongLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/DeleteSongLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/DeleteSongLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/DeleteSongLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/DeleteSongLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"ff2010ce61dc643a9b880ce9543e2b8b16fed814eb2aa5b675b71311fe1b5c0f.zip"},"environment":{"variables":{"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructDeleteSongLambdaRoleFEA229E4","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/DeleteSongLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/DeleteSongLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructDeleteSongLambda3C147F9C"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/DeleteSongLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/DeleteSongLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructDeleteSongLambda3C147F9C","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/DeleteSongLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructDeleteSongLambda3C147F9C","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetSongLambdaRole":{"id":"GetSongLambdaRole","path":"BackendStack/SongsConstruct/GetSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportGetSongLambdaRole":{"id":"ImportGetSongLambdaRole","path":"BackendStack/SongsConstruct/GetSongLambdaRole/ImportGetSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/GetSongLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SongsConstructGetSongLambdaRoleDefaultPolicy6EDD4DCA","roles":[{"Ref":"SongsConstructGetSongLambdaRole8114155C"}]}}}}}}},"GetSongLambda":{"id":"GetSongLambda","path":"BackendStack/SongsConstruct/GetSongLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/GetSongLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/GetSongLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/GetSongLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"ff69e7d08615053ad6b263b3b865134b22ab5953a32b4c3cbba6bb78979a49b2.zip"},"environment":{"variables":{"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTISTS_TABLE":{"Ref":"ArtistsAF1BB04E"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructGetSongLambdaRole8114155C","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/GetSongLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructGetSongLambdaE803F1EA"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/GetSongLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructGetSongLambdaE803F1EA","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/GetSongLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructGetSongLambdaE803F1EA","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"RateSongLambdaRole":{"id":"RateSongLambdaRole","path":"BackendStack/SongsConstruct/RateSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportRateSongLambdaRole":{"id":"ImportRateSongLambdaRole","path":"BackendStack/SongsConstruct/RateSongLambdaRole/ImportRateSongLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/RateSongLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/RateSongLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/RateSongLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Ratings9CD1D222","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Ratings9CD1D222","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SongsConstructRateSongLambdaRoleDefaultPolicy78082CC8","roles":[{"Ref":"SongsConstructRateSongLambdaRole39FFF76E"}]}}}}}}},"RateSongLambda":{"id":"RateSongLambda","path":"BackendStack/SongsConstruct/RateSongLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/RateSongLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/RateSongLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/RateSongLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/RateSongLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"4710aac83e7139288fb406aae1af50fbbbf9359b00618e1bbe095058874ebff1.zip"},"environment":{"variables":{"RATING_TABLE":{"Ref":"Ratings9CD1D222"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructRateSongLambdaRole39FFF76E","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/RateSongLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/RateSongLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructRateSongLambda6B27F156"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/RateSongLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/RateSongLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructRateSongLambda6B27F156","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/RateSongLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructRateSongLambda6B27F156","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetSongRatingLambdaRole":{"id":"GetSongRatingLambdaRole","path":"BackendStack/SongsConstruct/GetSongRatingLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportGetSongRatingLambdaRole":{"id":"ImportGetSongRatingLambdaRole","path":"BackendStack/SongsConstruct/GetSongRatingLambdaRole/ImportGetSongRatingLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongRatingLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SongsConstruct/GetSongRatingLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongRatingLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Ratings9CD1D222","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Ratings9CD1D222","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SongsConstructGetSongRatingLambdaRoleDefaultPolicy87A66164","roles":[{"Ref":"SongsConstructGetSongRatingLambdaRoleBF760942"}]}}}}}}},"GetSongRatingLambda":{"id":"GetSongRatingLambda","path":"BackendStack/SongsConstruct/GetSongRatingLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SongsConstruct/GetSongRatingLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SongsConstruct/GetSongRatingLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SongsConstruct/GetSongRatingLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongRatingLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a1fbf6d74b33cd753a49885c2856828ca65dd91e1a2b590012a9d3307c43308e.zip"},"environment":{"variables":{"RATING_TABLE":{"Ref":"Ratings9CD1D222"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SongsConstructGetSongRatingLambdaRoleBF760942","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SongsConstruct/GetSongRatingLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongRatingLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SongsConstructGetSongRatingLambda72CC02E9"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SongsConstruct/GetSongRatingLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SongsConstruct/GetSongRatingLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SongsConstructGetSongRatingLambda72CC02E9","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SongsConstruct/GetSongRatingLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SongsConstructGetSongRatingLambda72CC02E9","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}}}},"AlbumConstruct":{"id":"AlbumConstruct","path":"BackendStack/AlbumConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CreateAlbumLambdaRole":{"id":"CreateAlbumLambdaRole","path":"BackendStack/AlbumConstruct/CreateAlbumLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportCreateAlbumLambdaRole":{"id":"ImportCreateAlbumLambdaRole","path":"BackendStack/AlbumConstruct/CreateAlbumLambdaRole/ImportCreateAlbumLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/CreateAlbumLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/AlbumConstruct/CreateAlbumLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/CreateAlbumLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"NewContentTopicE1BD8C89"}}],"Version":"2012-10-17"},"policyName":"AlbumConstructCreateAlbumLambdaRoleDefaultPolicyD87CAC5C","roles":[{"Ref":"AlbumConstructCreateAlbumLambdaRoleD5F15C22"}]}}}}}}},"CreateAlbumLambda":{"id":"CreateAlbumLambda","path":"BackendStack/AlbumConstruct/CreateAlbumLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"864b3a994f55a56a0404ed127c8a516dac99ae9531278e54f27f40443bca2559.zip"},"environment":{"variables":{"BUCKET_NAME":{"Ref":"mymusicappfilesAC4E028D"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTIST_ALBUM_TABLE":{"Ref":"ArtistAlbum6D4E520D"},"SNS_TOPIC_ARN":{"Ref":"NewContentTopicE1BD8C89"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["AlbumConstructCreateAlbumLambdaRoleD5F15C22","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AlbumConstructCreateAlbumLambda9E7DAC17"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["AlbumConstructCreateAlbumLambda9E7DAC17","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/AlbumConstruct/CreateAlbumLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["AlbumConstructCreateAlbumLambda9E7DAC17","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetAlbumsLambdaRole":{"id":"GetAlbumsLambdaRole","path":"BackendStack/AlbumConstruct/GetAlbumsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportGetAlbumsLambdaRole":{"id":"ImportGetAlbumsLambdaRole","path":"BackendStack/AlbumConstruct/GetAlbumsLambdaRole/ImportGetAlbumsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumsLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/AlbumConstruct/GetAlbumsLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumsLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AlbumConstructGetAlbumsLambdaRoleDefaultPolicyB4CF55FB","roles":[{"Ref":"AlbumConstructGetAlbumsLambdaRoleB6C82476"}]}}}}}}},"GetAlbumsLambda":{"id":"GetAlbumsLambda","path":"BackendStack/AlbumConstruct/GetAlbumsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a5f081598193ee206a2d1543bd303a4d4b215ba2ad5d73fe9c0b92e910904407.zip"},"environment":{"variables":{"ALBUMS_TABLE":{"Ref":"Albums77B3A114"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["AlbumConstructGetAlbumsLambdaRoleB6C82476","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AlbumConstructGetAlbumsLambda214F25FB"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["AlbumConstructGetAlbumsLambda214F25FB","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/AlbumConstruct/GetAlbumsLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["AlbumConstructGetAlbumsLambda214F25FB","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"UpdateAlbumLambdaRole":{"id":"UpdateAlbumLambdaRole","path":"BackendStack/AlbumConstruct/UpdateAlbumLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportUpdateAlbumLambdaRole":{"id":"ImportUpdateAlbumLambdaRole","path":"BackendStack/AlbumConstruct/UpdateAlbumLambdaRole/ImportUpdateAlbumLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/UpdateAlbumLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/AlbumConstruct/UpdateAlbumLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/UpdateAlbumLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AlbumConstructUpdateAlbumLambdaRoleDefaultPolicyEE01A9FF","roles":[{"Ref":"AlbumConstructUpdateAlbumLambdaRole9F386333"}]}}}}}}},"UpdateAlbumLambda":{"id":"UpdateAlbumLambda","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"8be39a14ae895f16a1a6d3aea4c5bf515e0dfe2d2e060927fc32f4f690f28d65.zip"},"environment":{"variables":{"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTIST_ALBUM_TABLE":{"Ref":"ArtistAlbum6D4E520D"},"BUCKET_NAME":{"Ref":"mymusicappfilesAC4E028D"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["AlbumConstructUpdateAlbumLambdaRole9F386333","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AlbumConstructUpdateAlbumLambdaB9632FEC"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["AlbumConstructUpdateAlbumLambdaB9632FEC","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/AlbumConstruct/UpdateAlbumLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["AlbumConstructUpdateAlbumLambdaB9632FEC","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"DeleteAlbumLambdaRole":{"id":"DeleteAlbumLambdaRole","path":"BackendStack/AlbumConstruct/DeleteAlbumLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportDeleteAlbumLambdaRole":{"id":"ImportDeleteAlbumLambdaRole","path":"BackendStack/AlbumConstruct/DeleteAlbumLambdaRole/ImportDeleteAlbumLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/DeleteAlbumLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/AlbumConstruct/DeleteAlbumLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/DeleteAlbumLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AlbumConstructDeleteAlbumLambdaRoleDefaultPolicyC328FDBC","roles":[{"Ref":"AlbumConstructDeleteAlbumLambdaRoleC87B23AD"}]}}}}}}},"DeleteAlbumLambda":{"id":"DeleteAlbumLambda","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"433bf878911e06c600e3e0435323adfe80e775db691be7708e86aacd859a196e.zip"},"environment":{"variables":{"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["AlbumConstructDeleteAlbumLambdaRoleC87B23AD","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AlbumConstructDeleteAlbumLambda63B51E55"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["AlbumConstructDeleteAlbumLambda63B51E55","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/AlbumConstruct/DeleteAlbumLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["AlbumConstructDeleteAlbumLambda63B51E55","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetAlbumByIdLambdaRole":{"id":"GetAlbumByIdLambdaRole","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportGetAlbumByIdLambdaRole":{"id":"ImportGetAlbumByIdLambdaRole","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambdaRole/ImportGetAlbumByIdLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:GetItem","dynamodb:Query"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/AlbumId-index"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AlbumConstructGetAlbumByIdLambdaRoleDefaultPolicy0EC09080","roles":[{"Ref":"AlbumConstructGetAlbumByIdLambdaRoleDA103226"}]}}}}}}},"GetAlbumByIdLambda":{"id":"GetAlbumByIdLambda","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"6e302c615753cd68c19340a7ec54aca85d09cdedaa3338d19ebd08856354e9d6.zip"},"environment":{"variables":{"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ARTIST_ALBUM_TABLE":{"Ref":"ArtistAlbum6D4E520D"},"ARTIST_SONG_TABLE":{"Ref":"ArtistSong600154F0"},"ARTISTS_TABLE":{"Ref":"ArtistsAF1BB04E"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["AlbumConstructGetAlbumByIdLambdaRoleDA103226","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AlbumConstructGetAlbumByIdLambda4E204135"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["AlbumConstructGetAlbumByIdLambda4E204135","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/AlbumConstruct/GetAlbumByIdLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["AlbumConstructGetAlbumByIdLambda4E204135","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}}}},"SubscriptionsConstruct":{"id":"SubscriptionsConstruct","path":"BackendStack/SubscriptionsConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CreateSubscriptionLambdaRole":{"id":"CreateSubscriptionLambdaRole","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportCreateSubscriptionLambdaRole":{"id":"ImportCreateSubscriptionLambdaRole","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambdaRole/ImportCreateSubscriptionLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SubscriptionsConstructCreateSubscriptionLambdaRoleDefaultPolicy06363004","roles":[{"Ref":"SubscriptionsConstructCreateSubscriptionLambdaRoleFB12262C"}]}}}}}}},"CreateSubscriptionLambda":{"id":"CreateSubscriptionLambda","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"3bef59b7dcba6b5c6fb504a8f1ad7b0d834d762b0e4b8f3cc514932336802d23.zip"},"environment":{"variables":{"SUBSCRIPTIONS_TABLE":{"Ref":"Subscriptions1F71F6D8"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SubscriptionsConstructCreateSubscriptionLambdaRoleFB12262C","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SubscriptionsConstructCreateSubscriptionLambdaC57285D3"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SubscriptionsConstructCreateSubscriptionLambdaC57285D3","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SubscriptionsConstruct/CreateSubscriptionLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SubscriptionsConstructCreateSubscriptionLambdaC57285D3","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetSubscriptionsLambdaRole":{"id":"GetSubscriptionsLambdaRole","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportGetSubscriptionsLambdaRole":{"id":"ImportGetSubscriptionsLambdaRole","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambdaRole/ImportGetSubscriptionsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SubscriptionsConstructGetSubscriptionsLambdaRoleDefaultPolicy1C73D58C","roles":[{"Ref":"SubscriptionsConstructGetSubscriptionsLambdaRole5152B908"}]}}}}}}},"GetSubscriptionsLambda":{"id":"GetSubscriptionsLambda","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"e0344743793958e3cd6a6a12a46fb90ff4f99b7376638c5301096b795350e038.zip"},"environment":{"variables":{"SUBSCRIPTIONS_TABLE":{"Ref":"Subscriptions1F71F6D8"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SubscriptionsConstructGetSubscriptionsLambdaRole5152B908","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SubscriptionsConstructGetSubscriptionsLambda79C7D049"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SubscriptionsConstructGetSubscriptionsLambda79C7D049","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SubscriptionsConstruct/GetSubscriptionsLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SubscriptionsConstructGetSubscriptionsLambda79C7D049","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"DeleteSubscriptionLambdaRole":{"id":"DeleteSubscriptionLambdaRole","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportDeleteSubscriptionLambdaRole":{"id":"ImportDeleteSubscriptionLambdaRole","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambdaRole/ImportDeleteSubscriptionLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SubscriptionsConstructDeleteSubscriptionLambdaRoleDefaultPolicy9D273C32","roles":[{"Ref":"SubscriptionsConstructDeleteSubscriptionLambdaRole30148319"}]}}}}}}},"DeleteSubscriptionLambda":{"id":"DeleteSubscriptionLambda","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"086e13f04d63bd017fe65c88a93b646947bba7da8284d48db147f20b7a8c6d47.zip"},"environment":{"variables":{"SUBSCRIPTIONS_TABLE":{"Ref":"Subscriptions1F71F6D8"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["SubscriptionsConstructDeleteSubscriptionLambdaRole30148319","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SubscriptionsConstructDeleteSubscriptionLambda744D28CE"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["SubscriptionsConstructDeleteSubscriptionLambda744D28CE","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/SubscriptionsConstruct/DeleteSubscriptionLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["SubscriptionsConstructDeleteSubscriptionLambda744D28CE","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}}}},"ListeningHistoryConstruct":{"id":"ListeningHistoryConstruct","path":"BackendStack/ListeningHistoryConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"RecordListenLambdaRole":{"id":"RecordListenLambdaRole","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportRecordListenLambdaRole":{"id":"ImportRecordListenLambdaRole","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambdaRole/ImportRecordListenLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ListeningHistory4EE39CF7","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ListeningHistoryConstructRecordListenLambdaRoleDefaultPolicy6BF2E92D","roles":[{"Ref":"ListeningHistoryConstructRecordListenLambdaRoleDBA15A2D"}]}}}}}}},"RecordListenLambda":{"id":"RecordListenLambda","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"6101f92230d0271be1736e212359e274cd7a80dd435cb383cbdf03fb799c135d.zip"},"environment":{"variables":{"LISTENING_HISTORY_TABLE":{"Ref":"ListeningHistory4EE39CF7"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"}}},"handler":"handler.handler","memorySize":128,"role":{"Fn::GetAtt":["ListeningHistoryConstructRecordListenLambdaRoleDBA15A2D","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ListeningHistoryConstructRecordListenLambda5455361E"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ListeningHistoryConstructRecordListenLambda5455361E","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ListeningHistoryConstruct/RecordListenLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ListeningHistoryConstructRecordListenLambda5455361E","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GetListeningHistoryLambdaRole":{"id":"GetListeningHistoryLambdaRole","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportGetListeningHistoryLambdaRole":{"id":"ImportGetListeningHistoryLambdaRole","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambdaRole/ImportGetListeningHistoryLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ListeningHistory4EE39CF7","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"ListeningHistoryConstructGetListeningHistoryLambdaRoleDefaultPolicy08F20A61","roles":[{"Ref":"ListeningHistoryConstructGetListeningHistoryLambdaRoleDE66D8B9"}]}}}}}}},"GetListeningHistoryLambda":{"id":"GetListeningHistoryLambda","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"16d8f3139ece33e3fccb7f5b95e338553daa8c58e64b394b9776497b9c2892f7.zip"},"environment":{"variables":{"LISTENING_HISTORY_TABLE":{"Ref":"ListeningHistory4EE39CF7"}}},"handler":"handler.handler","memorySize":128,"role":{"Fn::GetAtt":["ListeningHistoryConstructGetListeningHistoryLambdaRoleDE66D8B9","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ListeningHistoryConstructGetListeningHistoryLambda9F99BDF2"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ListeningHistoryConstructGetListeningHistoryLambda9F99BDF2","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ListeningHistoryConstruct/GetListeningHistoryLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ListeningHistoryConstructGetListeningHistoryLambda9F99BDF2","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}}}},"FeedConstruct":{"id":"FeedConstruct","path":"BackendStack/FeedConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"GetFeedLambdaRole":{"id":"GetFeedLambdaRole","path":"BackendStack/FeedConstruct/GetFeedLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportGetFeedLambdaRole":{"id":"ImportGetFeedLambdaRole","path":"BackendStack/FeedConstruct/GetFeedLambdaRole/ImportGetFeedLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/FeedConstruct/GetFeedLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/FeedConstruct/GetFeedLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/FeedConstruct/GetFeedLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},{"Fn::GetAtt":["Score56CB761D","Arn"]},{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistAlbum6D4E520D","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistSong600154F0","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["Score56CB761D","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"FeedConstructGetFeedLambdaRoleDefaultPolicy8883576F","roles":[{"Ref":"FeedConstructGetFeedLambdaRole0FFCFDC9"}]}}}}}}},"GetFeedLambda":{"id":"GetFeedLambda","path":"BackendStack/FeedConstruct/GetFeedLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/FeedConstruct/GetFeedLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/FeedConstruct/GetFeedLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/FeedConstruct/GetFeedLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/FeedConstruct/GetFeedLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"2678da53fbbc24b9a8785950354cecb75b22531c2b7be768694f9d28545abd2d.zip"},"environment":{"variables":{"SCORE_TABLE":{"Ref":"Score56CB761D"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"},"ARTIST_SONG_TABLE":{"Ref":"ArtistSong600154F0"},"ARTIST_ALBUM_TABLE":{"Ref":"ArtistAlbum6D4E520D"}}},"handler":"handler.handler","memorySize":128,"role":{"Fn::GetAtt":["FeedConstructGetFeedLambdaRole0FFCFDC9","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/FeedConstruct/GetFeedLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/FeedConstruct/GetFeedLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"FeedConstructGetFeedLambda0D478810"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/FeedConstruct/GetFeedLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/FeedConstruct/GetFeedLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["FeedConstructGetFeedLambda0D478810","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/FeedConstruct/GetFeedLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["FeedConstructGetFeedLambda0D478810","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}}}},"GetFilteredContentLambdaRole":{"id":"GetFilteredContentLambdaRole","path":"BackendStack/GetFilteredContentLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportGetFilteredContentLambdaRole":{"id":"ImportGetFilteredContentLambdaRole","path":"BackendStack/GetFilteredContentLambdaRole/ImportGetFilteredContentLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/GetFilteredContentLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/GetFilteredContentLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/GetFilteredContentLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Albums77B3A114","Arn"]},{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Albums77B3A114","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtistsAF1BB04E","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetFilteredContentLambdaRoleDefaultPolicy3A988D01","roles":[{"Ref":"GetFilteredContentLambdaRoleBFB6DA89"}]}}}}}}},"GetFilteredContentLambda":{"id":"GetFilteredContentLambda","path":"BackendStack/GetFilteredContentLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/GetFilteredContentLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/GetFilteredContentLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/GetFilteredContentLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/GetFilteredContentLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"e37f40bbc11a86a3e61c1ac357f48f57ed96c39da29b96397e8a54550ab6358d.zip"},"environment":{"variables":{"ARTISTS_TABLE":{"Ref":"ArtistsAF1BB04E"},"ALBUMS_TABLE":{"Ref":"Albums77B3A114"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["GetFilteredContentLambdaRoleBFB6DA89","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/GetFilteredContentLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/GetFilteredContentLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GetFilteredContentLambda838D3EFC"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/GetFilteredContentLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/GetFilteredContentLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["GetFilteredContentLambda838D3EFC","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/GetFilteredContentLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["GetFilteredContentLambda838D3EFC","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"GenerateDownloadUrlLambdaRole":{"id":"GenerateDownloadUrlLambdaRole","path":"BackendStack/GenerateDownloadUrlLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportGenerateDownloadUrlLambdaRole":{"id":"ImportGenerateDownloadUrlLambdaRole","path":"BackendStack/GenerateDownloadUrlLambdaRole/ImportGenerateDownloadUrlLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/GenerateDownloadUrlLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/GenerateDownloadUrlLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/GenerateDownloadUrlLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["mymusicappfilesAC4E028D","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SongsD2AA5F2A","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GenerateDownloadUrlLambdaRoleDefaultPolicyFEBD6494","roles":[{"Ref":"GenerateDownloadUrlLambdaRole671F1150"}]}}}}}}},"GenerateDownloadUrlLambda":{"id":"GenerateDownloadUrlLambda","path":"BackendStack/GenerateDownloadUrlLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/GenerateDownloadUrlLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/GenerateDownloadUrlLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/GenerateDownloadUrlLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/GenerateDownloadUrlLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"d8e297776ea52513eea0ae72248a32f267dbddda1594c3f5b8a417c6ddfc3b31.zip"},"environment":{"variables":{"SONG_BUCKET_NAME":{"Ref":"mymusicappfilesAC4E028D"},"SONGS_TABLE":{"Ref":"SongsD2AA5F2A"},"CORS_ORIGIN":"*"}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["GenerateDownloadUrlLambdaRole671F1150","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/GenerateDownloadUrlLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/GenerateDownloadUrlLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GenerateDownloadUrlLambda21498A65"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/GenerateDownloadUrlLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/GenerateDownloadUrlLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/GenerateDownloadUrlLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["GenerateDownloadUrlLambda21498A65","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}}}},"ScoreUpdaterLambdaRole":{"id":"ScoreUpdaterLambdaRole","path":"BackendStack/ScoreUpdaterLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportScoreUpdaterLambdaRole":{"id":"ImportScoreUpdaterLambdaRole","path":"BackendStack/ScoreUpdaterLambdaRole/ImportScoreUpdaterLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ScoreUpdaterLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Score56CB761D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Score56CB761D","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ListeningHistory4EE39CF7","Arn"]},{"Fn::GetAtt":["Ratings9CD1D222","Arn"]},{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Ratings9CD1D222","Arn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},"/index/*"]]},{"Ref":"AWS::NoValue"}]},{"Action":"dynamodb:ListStreams","Effect":"Allow","Resource":"*"},{"Action":["dynamodb:DescribeStream","dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ListeningHistory4EE39CF7","StreamArn"]},{"Fn::GetAtt":["Ratings9CD1D222","StreamArn"]},{"Fn::GetAtt":["Subscriptions1F71F6D8","StreamArn"]}]}],"Version":"2012-10-17"},"policyName":"ScoreUpdaterLambdaRoleDefaultPolicy1B256CF5","roles":[{"Ref":"ScoreUpdaterLambdaRoleB8A86FF1"}]}}}}}}},"ScoreUpdaterLambda":{"id":"ScoreUpdaterLambda","path":"BackendStack/ScoreUpdaterLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/ScoreUpdaterLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/ScoreUpdaterLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/ScoreUpdaterLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a9f0d3b9fbfa007dfc7ca1c746845b95f0e8982ccccc2cbc2760121b83d55bc3.zip"},"environment":{"variables":{"SCORE_TABLE":{"Ref":"Score56CB761D"},"RATING_TABLE_NAME":{"Ref":"Ratings9CD1D222"},"SUBSCRIPTIONS_TABLE_NAME":{"Ref":"Subscriptions1F71F6D8"}}},"handler":"handler.handler","memorySize":128,"role":{"Fn::GetAtt":["ScoreUpdaterLambdaRoleB8A86FF1","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/ScoreUpdaterLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"ScoreUpdaterLambda4C036DD2"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/ScoreUpdaterLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["ScoreUpdaterLambda4C036DD2","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/ScoreUpdaterLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["ScoreUpdaterLambda4C036DD2","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"DynamoDBEventSource:BackendStackRatingsC7C26C9F":{"id":"DynamoDBEventSource:BackendStackRatingsC7C26C9F","path":"BackendStack/ScoreUpdaterLambda/DynamoDBEventSource:BackendStackRatingsC7C26C9F","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.215.0","metadata":[{"target":"*","eventSourceArn":"*","metricsConfig":"*","supportS3OnFailureDestination":true,"batchSize":"*","bisectBatchOnError":"*","startingPosition":"LATEST","reportBatchItemFailures":"*","maxBatchingWindow":"*","maxRecordAge":"*","retryAttempts":"*","parallelizationFactor":"*","onFailure":"*","tumblingWindow":"*","enabled":"*","filters":"*","filterEncryption":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambda/DynamoDBEventSource:BackendStackRatingsC7C26C9F/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":1,"eventSourceArn":{"Fn::GetAtt":["Ratings9CD1D222","StreamArn"]},"functionName":{"Ref":"ScoreUpdaterLambda4C036DD2"},"startingPosition":"LATEST"}}}}},"DynamoDBEventSource:BackendStackSubscriptions65D2BCAA":{"id":"DynamoDBEventSource:BackendStackSubscriptions65D2BCAA","path":"BackendStack/ScoreUpdaterLambda/DynamoDBEventSource:BackendStackSubscriptions65D2BCAA","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.215.0","metadata":[{"target":"*","eventSourceArn":"*","metricsConfig":"*","supportS3OnFailureDestination":true,"batchSize":"*","bisectBatchOnError":"*","startingPosition":"LATEST","reportBatchItemFailures":"*","maxBatchingWindow":"*","maxRecordAge":"*","retryAttempts":"*","parallelizationFactor":"*","onFailure":"*","tumblingWindow":"*","enabled":"*","filters":"*","filterEncryption":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambda/DynamoDBEventSource:BackendStackSubscriptions65D2BCAA/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":1,"eventSourceArn":{"Fn::GetAtt":["Subscriptions1F71F6D8","StreamArn"]},"functionName":{"Ref":"ScoreUpdaterLambda4C036DD2"},"startingPosition":"LATEST"}}}}},"DynamoDBEventSource:BackendStackListeningHistoryB5568F65":{"id":"DynamoDBEventSource:BackendStackListeningHistoryB5568F65","path":"BackendStack/ScoreUpdaterLambda/DynamoDBEventSource:BackendStackListeningHistoryB5568F65","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.215.0","metadata":[{"target":"*","eventSourceArn":"*","metricsConfig":"*","supportS3OnFailureDestination":true,"batchSize":"*","bisectBatchOnError":"*","startingPosition":"LATEST","reportBatchItemFailures":"*","maxBatchingWindow":"*","maxRecordAge":"*","retryAttempts":"*","parallelizationFactor":"*","onFailure":"*","tumblingWindow":"*","enabled":"*","filters":"*","filterEncryption":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/ScoreUpdaterLambda/DynamoDBEventSource:BackendStackListeningHistoryB5568F65/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":1,"eventSourceArn":{"Fn::GetAtt":["ListeningHistory4EE39CF7","StreamArn"]},"functionName":{"Ref":"ScoreUpdaterLambda4C036DD2"},"startingPosition":"LATEST"}}}}}}},"NewContentHandlerLambdaRole":{"id":"NewContentHandlerLambdaRole","path":"BackendStack/NewContentHandlerLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.215.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportNewContentHandlerLambdaRole":{"id":"ImportNewContentHandlerLambdaRole","path":"BackendStack/NewContentHandlerLambdaRole/ImportNewContentHandlerLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.215.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"BackendStack/NewContentHandlerLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/NewContentHandlerLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.215.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentHandlerLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Subscriptions1F71F6D8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["Score56CB761D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["Score56CB761D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"NewContentHandlerLambdaRoleDefaultPolicyBFB3F572","roles":[{"Ref":"NewContentHandlerLambdaRole358E3DE8"}]}}}}}}},"NewContentHandlerLambda":{"id":"NewContentHandlerLambda","path":"BackendStack/NewContentHandlerLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.215.0","metadata":[{"environment":"*","layers":[],"memorySize":"*","role":"*","timeout":"*","code":"*","handler":"*","runtime":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addLayers":[]}]},"children":{"Code":{"id":"Code","path":"BackendStack/NewContentHandlerLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.215.0"},"children":{"Stage":{"id":"Stage","path":"BackendStack/NewContentHandlerLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.215.0"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/NewContentHandlerLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.215.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BackendStack/NewContentHandlerLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"028cab42c40922499443e6bcd00516e0c68e58a7b11c91e89b9e65f488934b8e.zip"},"environment":{"variables":{"SUBSCRIPTIONS_TABLE":{"Ref":"Subscriptions1F71F6D8"},"SCORE_TABLE":{"Ref":"Score56CB761D"},"RATING_TABLE":{"Ref":"Ratings9CD1D222"}}},"handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["NewContentHandlerLambdaRole358E3DE8","Arn"]},"runtime":"python3.9","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"BackendStack/NewContentHandlerLambda/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.215.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentHandlerLambda/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"NewContentHandlerLambdaFAA8DB3B"}]]},"retentionInDays":731}}}}},"FunctionUrl":{"id":"FunctionUrl","path":"BackendStack/NewContentHandlerLambda/FunctionUrl","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.FunctionUrl","version":"2.215.0","metadata":[{"function":"*","authType":"NONE","cors":{"allowedOrigins":"*"}}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentHandlerLambda/FunctionUrl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnUrl","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Url","aws:cdk:cloudformation:props":{"authType":"NONE","cors":{"allowMethods":["*"],"allowOrigins":["*"]},"targetFunctionArn":{"Fn::GetAtt":["NewContentHandlerLambdaFAA8DB3B","Arn"]}}}}}},"invoke-function-url":{"id":"invoke-function-url","path":"BackendStack/NewContentHandlerLambda/invoke-function-url","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunctionUrl","functionName":{"Fn::GetAtt":["NewContentHandlerLambdaFAA8DB3B","Arn"]},"functionUrlAuthType":"NONE","principal":"*"}}},"AllowInvoke:BackendStackNewContentTopic6E806F6B":{"id":"AllowInvoke:BackendStackNewContentTopic6E806F6B","path":"BackendStack/NewContentHandlerLambda/AllowInvoke:BackendStackNewContentTopic6E806F6B","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["NewContentHandlerLambdaFAA8DB3B","Arn"]},"principal":"sns.amazonaws.com","sourceArn":{"Ref":"NewContentTopicE1BD8C89"}}}},"NewContentTopic":{"id":"NewContentTopic","path":"BackendStack/NewContentHandlerLambda/NewContentTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.215.0","metadata":[{"topic":"*","endpoint":"*","protocol":"lambda","filterPolicy":"*","filterPolicyWithMessageBody":"*","region":"*","deadLetterQueue":"*"}]},"children":{"Resource":{"id":"Resource","path":"BackendStack/NewContentHandlerLambda/NewContentTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.215.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["NewContentHandlerLambdaFAA8DB3B","Arn"]},"protocol":"lambda","topicArn":{"Ref":"NewContentTopicE1BD8C89"}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BackendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"BackendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.215.0"}},"Condition":{"id":"Condition","path":"BackendStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.215.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BackendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.215.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BackendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.215.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}